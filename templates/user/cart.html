{% extends 'base.html' %} {% block title %}Cart - CanteenKart{% endblock %} {% block content %}
<h1 class="text-2xl font-semibold mb-4">Your Cart</h1>
{% if items %}
<div class="card bg-base-200 shadow">
	<div class="card-body">
		<div class="overflow-x-auto">
			<table class="table">
				<thead>
					<tr>
						<th>Item</th>
						<th class="w-24">Qty</th>
						<th class="w-32">Subtotal</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					{% for row in items %}
					<tr>
						<td>{{ row.item.name }}</td>
						<td class="w-24">
							<form action="{{ url_for('cart.update_cart', item_id=row.item.item_id) }}" method="post" class="flex items-center gap-2">
								<button class="btn btn-xs" name="action" value="dec">-</button>
								<input type="number" name="qty" value="{{ row.qty }}" min="0" max="{{ row.item.stock_qty }}" class="input input-sm w-16 text-center" />
								<button class="btn btn-xs" name="action" value="inc">+</button>
							</form>
						</td>
						<td>₹{{ '%.2f'|format(row.subtotal) }}</td>
						<td class="text-right">
							<form action="{{ url_for('cart.remove_from_cart', item_id=row.item.item_id) }}" method="post">
								<button class="btn btn-ghost btn-sm" type="submit">Remove</button>
							</form>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		<div class="flex items-center justify-between mt-4">
			<div class="text-lg">Total: <span class="font-semibold">₹{{ '%.2f'|format(total) }}</span></div>
			<a href="{{ url_for('cart.checkout') }}" class="btn btn-primary">Proceed to Checkout</a>
		</div>
	</div>
</div>
{% else %}
<div class="alert">Your cart is empty.</div>
{% endif %} {% endblock %}
