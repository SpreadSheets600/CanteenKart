{% extends 'base.html' %} {% block title %}Owner Menu - CanteenKart{% endblock %} {% block content %}
<h1 class="text-2xl font-semibold mb-4">Owner Menu Management</h1>

<div class="card bg-base-200 shadow mb-6">
	<div class="card-body">
		<h2 class="card-title">Add Item</h2>
		<form action="{{ url_for('menu.add_item') }}" method="post" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 items-end">
			{% from 'components/forms.html' import text, number, checkbox %} {{ text('name','Name','', 'text','', true) }} {{ number('price','Price','', '0.01', 0, None, true) }} {{ number('stock_qty','Stock Qty','0', '1', 0, None, false) }} {{ checkbox('is_available','Available', true) }} {{ text('description','Description','') }}
			<div class="sm:col-span-2 lg:col-span-1"><button type="submit" class="btn btn-primary w-full">Add</button></div>
		</form>
	</div>
</div>

<div class="card bg-base-200 shadow">
	<div class="card-body">
		<h2 class="card-title">Existing Items</h2>
		<div class="overflow-x-auto">
			<table class="table">
				<thead>
					<tr>
						<th>ID</th>
						<th>Name</th>
						<th>Price</th>
						<th>Stock</th>
						<th>Available</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for item in items %}
					<tr>
						<td>{{ item.item_id }}</td>
						<td>{{ item.name }}</td>
						<td>â‚¹{{ '%.2f'|format(item.price) }}</td>
						<td>{{ item.stock_qty }}</td>
						<td>{{ 'Yes' if item.is_available else 'No' }}</td>
						<td>
							<form action="{{ url_for('menu.edit_item', item_id=item.item_id) }}" method="post" class="flex flex-wrap gap-2 items-center">
								<input name="name" value="{{ item.name }}" class="input input-bordered input-sm w-28" />
								<input name="price" value="{{ item.price }}" class="input input-bordered input-sm w-24" />
								<input name="stock_qty" value="{{ item.stock_qty }}" class="input input-bordered input-sm w-20" />
								<label class="label cursor-pointer gap-2"><span class="label-text">Avail</span><input type="checkbox" name="is_available" class="checkbox checkbox-sm" {% if item.is_available %}checked{% endif %} /></label>
								<button type="submit" class="btn btn-sm">Save</button>
							</form>
							<form action="{{ url_for('menu.delete_item', item_id=item.item_id) }}" method="post" class="inline-block mt-1">
								<button type="submit" class="btn btn-ghost btn-sm" onclick="return confirm('Delete item?')">Delete</button>
							</form>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>

{% endblock %}
